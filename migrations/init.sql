CREATE TABLE IF NOT EXISTS tg_chat (
    id BIGINT PRIMARY KEY,
    created_at TIMESTAMP WITHOUT TIME ZONE NOT NULL
);


CREATE TABLE IF NOT EXISTS link (
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    url TEXT UNIQUE NOT NULL,
    tags TEXT[],
    filters TEXT[],
    description TEXT,
    updated_at TIMESTAMP WITHOUT TIME ZONE
);

CREATE TABLE IF NOT EXISTS tg_chat_link(
    id BIGINT PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    tg_chat_id BIGINT REFERENCES tg_chat(id) ON DELETE CASCADE,
    link_id BIGINT REFERENCES link(id) ON DELETE CASCADE
);
